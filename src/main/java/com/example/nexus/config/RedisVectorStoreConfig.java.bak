package com.example.nexus.config;

import org.springframework.ai.embedding.EmbeddingModel;
import org.springframework.ai.vectorstore.RedisVectorStore;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.data.redis.connection.RedisConnectionFactory;

@Configuration
public class RedisVectorStoreConfig {

    @Bean
    public RedisVectorStore vectorStore(
            EmbeddingModel embeddingModel,
            RedisConnectionFactory redisConnectionFactory) {

        var config = RedisVectorStore.RedisVectorStoreConfig.builder()
                .withIndexName("default-index")
                .withPrefix("default:")
                .build();

        return new RedisVectorStore(config, embeddingModel, redisConnectionFactory, true);
    }
}
